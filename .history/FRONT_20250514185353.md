Pour intÃ©grer **ReactJS** dans votre projet **LMS (Learning Management System)** avec NestJS en backend, voici une approche structurÃ©e et dÃ©taillÃ©e, incluant les configurations clÃ©s, les bonnes pratiques et les Ã©tapes d'intÃ©gration frontend/backend.

---

## ðŸŒŸ **Architecture Frontend (ReactJS) dans un Monorepo Nx**
```markdown
apps/
â”œâ”€â”€ web/                  # Application React principale
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/          # Composants principaux (pages, layouts)
â”‚   â”‚   â”œâ”€â”€ lib/          # Features (courses, auth, dashboard)
â”‚   â”‚   â”œâ”€â”€ assets/       # Images, polices
â”‚   â”‚   â”œâ”€â”€ styles/       # Fichiers CSS/SCSS globaux
â”‚   â”‚   â””â”€â”€ main.tsx      # Point d'entrÃ©e
â”‚   â””â”€â”€ project.json      # Configuration Nx
â”‚
libs/
â”œâ”€â”€ ui/                   # Composants UI rÃ©utilisables (boutons, cartes)
â”œâ”€â”€ api-client/           # Client HTTP gÃ©nÃ©rÃ© (Swagger/OpenAPI)
â””â”€â”€ shared/               # Types/interfaces partagÃ©s avec le backend
```

---

## ðŸ›  **Configurations Techniques ClÃ©s**

### 1. **Initialiser React dans Nx**
```bash
nx g @nx/react:app web --style=scss --routing
```
- **`--style=scss`** : Active SCSS pour les styles.
- **`--routing`** : GÃ©nÃ¨re un module de routage.

---

### 2. **Configuration de Base (`apps/web/project.json`)**
```json
{
  "targets": {
    "build": {
      "executor": "@nx/webpack:webpack",
      "options": {
        "outputPath": "dist/apps/web",
        "index": "apps/web/src/index.html",
        "main": "apps/web/src/main.tsx",
        "tsConfig": "apps/web/tsconfig.app.json",
        "assets": ["apps/web/src/assets"],
        "styles": ["apps/web/src/styles.css"],
        "webpackConfig": "apps/web/webpack.config.js"
      }
    },
    "serve": {
      "executor": "@nx/web:dev-server",
      "options": {
        "proxyConfig": "apps/web/proxy.conf.json"  // Proxy vers l'API NestJS
      }
    }
  }
}
```

---

### 3. **Proxy des RequÃªtes API**
#### **Fichier `apps/web/proxy.conf.json`**
```json
{
  "/api": {
    "target": "http://localhost:3000",  // Backend NestJS
    "secure": false,
    "pathRewrite": { "^/api": "" }
  }
}
```
- **Pourquoi ?** Ã‰vite les erreurs CORS en dÃ©veloppement.

---

### 4. **Client API Auto-gÃ©nÃ©rÃ© (OpenAPI/Swagger)**
- **GÃ©nÃ©rez un client HTTP depuis votre Swagger NestJS** :
  ```bash
  nx g @nx/js:library api-client --importPath=@lms/api-client --buildable
  ```
- **Utilisez `openapi-generator-cli`** :
  ```bash
  npx openapi-generator-cli generate -i http://localhost:3000/api-json -o libs/api-client/src --generator-name typescript-axios
  ```
- **Exemple d'utilisation** :
  ```tsx
  // apps/web/src/lib/courses/course-list.tsx
  import { useGetCourses } from '@lms/api-client';

  function CourseList() {
    const { data: courses } = useGetCourses();
    return (
      <div>
        {courses?.map(course => <div key={course.id}>{course.title}</div>)}
      </div>
    );
  }
  ```

---

### 5. **Gestion d'Ã‰tat (Redux Toolkit ou React Query)**
#### **Avec Redux Toolkit** :
```bash
nx g @nx/react:redux courses --project=web
```
- **Slice exemple** :
  ```tsx
  // apps/web/src/app/store/coursesSlice.ts
  import { createSlice } from '@reduxjs/toolkit';
  import { Course } from '@lms/shared';

  const initialState: Course[] = [];

  export const coursesSlice = createSlice({
    name: 'courses',
    initialState,
    reducers: {
      addCourse: (state, action) => [...state, action.payload],
    },
  });
  ```

#### **Avec React Query** (recommandÃ© pour les APIs) :
```tsx
// apps/web/src/lib/courses/course-list.tsx
import { useQuery } from 'react-query';
import { fetchCourses } from '@lms/api-client';

function CourseList() {
  const { data: courses } = useQuery('courses', fetchCourses);
  return (...);
}
```

---

### 6. **Authentification (JWT)**
#### **Contexte d'Auth** :
```tsx
// apps/web/src/context/AuthContext.tsx
import { createContext, useContext } from 'react';
import { login, User } from '@lms/api-client';

const AuthContext = createContext<{ user: User | null; login: (email: string, password: string) => Promise<void> }>(null!);

export function AuthProvider({ children }) {
  const [user, setUser] = useState<User | null>(null);

  const handleLogin = async (email: string, password: string) => {
    const token = await login(email, password);
    localStorage.setItem('token', token);
    setUser(await fetchCurrentUser());
  };

  return <AuthContext.Provider value={{ user, login: handleLogin }}>{children}</AuthContext.Provider>;
}
```

#### **Protected Route** :
```tsx
// apps/web/src/components/ProtectedRoute.tsx
import { Navigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';

export function ProtectedRoute({ children }) {
  const { user } = useAuth();
  return user ? children : <Navigate to="/login" />;
}
```

---

### 7. **Styles et UI**
#### **BibliothÃ¨que UI partagÃ©e** :
```bash
nx g @nx/react:library ui --importPath=@lms/ui --style=scss
```
- **Exemple de composant** :
  ```tsx
  // libs/ui/src/lib/Button/Button.tsx
  import './Button.css';

  export function Button({ children }: { children: React.ReactNode }) {
    return <button className="btn">{children}</button>;
  }
  ```

#### **Tailwind CSS (Optionnel)** :
```bash
nx g @nx/react:setup-tailwind --project=web
```
- **Config `tailwind.config.js`** :
  ```js
  module.exports = {
    content: [
      './apps/web/src/**/*.{html,ts,tsx}',
      './libs/ui/src/**/*.{html,ts,tsx}',
    ],
  };
  ```

---

### 8. **Tests**
#### **Tests Unitaires (Jest)**
```tsx
// apps/web/src/lib/courses/course-list.spec.tsx
import { render } from '@testing-library/react';
import { CourseList } from './course-list';

describe('CourseList', () => {
  it('should render courses', () => {
    const { getByText } = render(<CourseList />);
    expect(getByText('NestJS 101')).toBeInTheDocument();
  });
});
```

#### **Tests E2E (Cypress)**
```bash
nx g @nx/cypress:configuration --project=web
```
- **ScÃ©nario exemple** :
  ```ts
  // apps/web-e2e/src/e2e/login.cy.ts
  describe('Login', () => {
    it('should log in successfully', () => {
      cy.visit('/login');
      cy.get('#email').type('user@example.com');
      cy.get('#password').type('password');
      cy.get('button[type="submit"]').click();
      cy.url().should('include', '/dashboard');
    });
  });
  ```

---

## ðŸ”¥ **Workflow de DÃ©veloppement**
1. **Lancer le backend + frontend** :
   ```bash
   nx run-many --target=serve --projects=api,web
   ```
   - Frontend: `http://localhost:4200`
   - Backend: `http://localhost:3000`

2. **Builder pour la production** :
   ```bash
   nx build api --prod && nx build web --prod
   ```

3. **DÃ©ployer** :
   - **Frontend** : Static files sur Vercel/Netlify.
   - **Backend** : Container Docker sur AWS/Google Cloud.

---

## ðŸ“Œ **Bonnes Pratiques**
- **Partagez les types** entre frontend/backend via `libs/shared`.
- **Utilisez des hooks personnalisÃ©s** pour les appels API (`useCourses`, `useAuth`).
- **Centralisez la gestion d'erreurs** (intercepteurs Axios/React Query).
- **Optimisez les bundles** avec `@nx/webpack:webpack` (code splitting).

---

Avec cette structure, votre **LMS sera scalable, bien organisÃ© et maintenable**. Vous pouvez Ã©tendre facilement les fonctionnalitÃ©s (chat en temps rÃ©el, tÃ©lÃ©chargement de vidÃ©os, etc.) en ajoutant des libs ou modules. ðŸš€
